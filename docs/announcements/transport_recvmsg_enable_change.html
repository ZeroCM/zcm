
<!DOCTYPE html>
<html lang='en-us'>
  <head>
    <meta charset='UTF-8'>
    <title>announcements/transport_recvmsg_enable_change</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' href='../../stylesheets/normalize.css' media='screen'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' href='../../stylesheets/stylesheet.css' media='screen'>
    <link rel='stylesheet' type='text/css' href='../../stylesheets/github-light.css' media='screen'>
  </head>
  <body>
    <section class='page-header'>
      <section style='cursor:pointer' onclick='window.location="../../index.html";'>
        <h1 class='project-name'>Zcm</h1>
        <h2 class='project-tagline'>Zero Communications and Marshalling</h2>
      </section>
      <a href='https://github.com/ZeroCM/zcm' class='btn'>View on GitHub</a>
      <a href='https://github.com/ZeroCM/zcm/actions/workflows/build.yml' class='btn'>Monitor Builds</a>
      <a href='https://discord.gg/T6jYM3eMjw' class='btn'>Chat with the team</a>
      <a href='https://groups.google.com/forum/#!forum/zcm-users' class='btn'>Ask a Question</a>
      <a href='https://github.com/ZeroCM/zcm/zipball/master' class='btn'>Download .zip</a>
      <a href='https://github.com/ZeroCM/zcm/tarball/master' class='btn'>Download .tar.gz</a>
    </section>

    <section class='main-content'>
<p><a style="margin-right: 1rem;" href="javascript:history.go(-1)">Back</a>
<a href="../../index.html">Home</a></p>

<h1>Announcement:</h1>

<p>Hi All,</p>

<p>Quick update on a recent change to the ZCM transport API. The semantics of using the <code>zcm_trans_recvmsg_enable</code> call are changing. Note: many transports will not be affected by this change because they do not make use of this call, but if you have written one that does, read on.</p>

<p>Previously, passing NULL as the channel argument to <code>zcm_trans_recvmsg_enable</code> would hint to the transport that it should receive data on all channels. This was used as a proxy for passing regex subscriptions down to the transport layer. Unfortunately, it had the side effect of enabling significantly more data traffic than strictly necessary if the regex subscription in question was anything other than <code>".*"</code>.</p>

<p>Now, <code>zcm_trans_recvmsg_enable</code> will never be called with NULL as the argument. Instead, it should be able to accept a <code>channel</code> argument that potentially contains a regex string. Note that because this function only acts as a "hint" to the underlying transport, retaining previous performance behavior would be as simple as checking for any special characters in the input channel and then treating it the same as if the channel had been NULL previously. However, now transports have the ability to handle the various regex channels in a more intelligent way to trim down on the traffic they are handling (if applicable for that transport).</p>

<p>It is also worth noting that the zcm blocking / nonblocking layer actually already handles some of the bookkeeping for you. Specifically, the zcm layer will <em>only</em> call <code>zcm_trans_recvmsg_enable(channel, false)</code> if :</p>

<ul>
<li>channel <em>is not</em> a regex string <em>and</em> there are no more explicit subscriptions on that channel</li>
<li>channel <em>is</em> a regex string <em>and</em> there are no more identical regex subscriptions</li>
</ul>

<p>This means there are effectively 2 more conditions that the transport itself needs to handle (again, only if they choose to in order to be more precise). Those cases are :</p>

<ul>
<li>An explicit subscription channel is disabled, but messages on that channel still match a previously enabled regex. In this case, messages should still be received on that channel; however, the transport can now know that there are no remaining explicit subscriptions to it.</li>
<li>"Overlapping" regex subscriptions where more than 1 regex matches a single channel. Even if one of those regex is disabled, messages that match any enabled regex should still be received.</li>
</ul>

<p>As always, feel free to reach out on our <a href="https://groups.google.com/forum/#!forum/zcm-users">forums</a> or on <a href="https://gitter.im/ZeroCM/zcm">gitter</a> with any questions!
~The ZCM Team</p>

<p><hr>
<a style="margin-right: 1rem;" href="javascript:history.go(-1)">Back</a>
<a href="../../index.html">Home</a></p>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73394372-1', 'auto');
  ga('send', 'pageview');

</script>
</section> </body> </html>
